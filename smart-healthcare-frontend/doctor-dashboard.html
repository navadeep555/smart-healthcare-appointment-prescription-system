<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Doctor Dashboard | MediCare</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/dashboard.css" />
</head>
<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar">
  <div class="navbar-left">
    <h2>MediCare</h2>
    <span class="tagline">Healthcare Management System</span>
  </div>

  <div class="navbar-right">
    <div class="notifications">
      <span class="notification-icon">ğŸ””</span>
      <span class="notification-badge">3</span>
    </div>

    <div class="profile-wrapper">
      <div id="profileCircle" class="profile-circle">D</div>

      <div id="profileMenu" class="profile-menu" style="display:none;">
        <div class="profile-info">
          <strong id="profileName"></strong><br>
          <span>Doctor</span>
        </div>

        <hr>

        <!-- âœ… ORIGINAL LINK -->
        <a href="doctor-prescriptions.html">
          <span class="menu-icon">ğŸ“‹</span> Prescription History
        </a>

        <!-- âœ… NEW LINKS -->
        <a href="#" onclick="viewSchedule()">
          <span class="menu-icon">ğŸ“…</span> My Schedule
        </a>

        <a href="#" onclick="viewPatients()">
          <span class="menu-icon">ğŸ‘¥</span> My Patients
        </a>

        <a href="#" onclick="openSettings()">
          <span class="menu-icon">âš™ï¸</span> Settings
        </a>

        <a href="#" onclick="openEditProfile()">
          <span class="menu-icon">âœï¸</span> Edit Profile
        </a>

        <a href="#" onclick="logout()">
          <span class="menu-icon">ğŸšª</span> Logout
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- ================= DASHBOARD ================= -->
<main class="dashboard">

  <!-- ================= HEADER ================= -->
  <section class="dashboard-header">
    <div class="header-content">
      <div>
        <h1 id="welcome"></h1>
        <p>Manage your patient appointments and prescriptions</p>
      </div>
      <div class="header-actions">
        <button class="btn-primary" onclick="openNewAppointment()">+ New Appointment</button>
        <button class="btn-secondary" onclick="openQuickPrescription()">ğŸ“ Quick Prescription</button>
      </div>
    </div>
  </section>

  <!-- ================= STATISTICS CARDS ================= -->
  <section class="stats-section">
    <div class="stat-card stat-card-blue">
      <div class="stat-icon">ğŸ‘¥</div>
      <div class="stat-details">
        <h3 id="totalPatients">0</h3>
        <p>Total Patients</p>
      </div>
    </div>

    <div class="stat-card stat-card-green">
      <div class="stat-icon">ğŸ“…</div>
      <div class="stat-details">
        <h3 id="todayAppointments">0</h3>
        <p>Today's Appointments</p>
      </div>
    </div>

    <div class="stat-card stat-card-orange">
      <div class="stat-icon">â³</div>
      <div class="stat-details">
        <h3 id="pendingAppointments">0</h3>
        <p>Pending</p>
      </div>
    </div>

    <div class="stat-card stat-card-purple">
      <div class="stat-icon">âœ…</div>
      <div class="stat-details">
        <h3 id="completedToday">0</h3>
        <p>Completed Today</p>
      </div>
    </div>
  </section>

  <!-- ================= MAIN CONTENT GRID ================= -->
  <section class="content-grid">
    
    <!-- ================= APPOINTMENTS (LEFT COLUMN) ================= -->
    <div class="info-cards">
      <div class="info-card">
        <div class="card-header">
          <h2>Appointments</h2>
          <div class="card-filters">
            <button class="filter-btn active" onclick="filterAppointments('all')">All</button>
            <button class="filter-btn" onclick="filterAppointments('today')">Today</button>
            <button class="filter-btn" onclick="filterAppointments('pending')">Pending</button>
          </div>
        </div>

        <!-- ğŸ”¥ REQUIRED CONTAINER (JS FILLS THIS) -->
        <div id="doctorAppointments">
          <p>Loading appointments...</p>
        </div>
      </div>
    </div>

    <!-- ================= QUICK ACTIONS & RECENT (RIGHT COLUMN) ================= -->
    <div class="sidebar-cards">
      
      <!-- Quick Actions Card -->
      <div class="info-card quick-actions-card">
        <h2>Quick Actions</h2>
        <div class="quick-actions">
          <button class="quick-btn" onclick="viewTodaySchedule()">
            <span class="quick-icon">ğŸ“†</span>
            <span>Today's Schedule</span>
          </button>
          <button class="quick-btn" onclick="openNewPrescription()">
            <span class="quick-icon">ğŸ’Š</span>
            <span>Write Prescription</span>
          </button>
          <button class="quick-btn" onclick="viewReports()">
            <span class="quick-icon">ğŸ“Š</span>
            <span>View Reports</span>
          </button>
          <button class="quick-btn" onclick="openMessaging()">
            <span class="quick-icon">ğŸ’¬</span>
            <span>Messages</span>
          </button>
        </div>
      </div>

      <!-- Recent Activity Card -->
      <div class="info-card recent-activity-card">
        <h2>Recent Activity</h2>
        <div id="recentActivity">
          <div class="activity-item">
            <div class="activity-icon">âœ…</div>
            <div class="activity-details">
              <p class="activity-title">Appointment completed</p>
              <p class="activity-time">2 hours ago</p>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">ğŸ“‹</div>
            <div class="activity-details">
              <p class="activity-title">Prescription created</p>
              <p class="activity-time">5 hours ago</p>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon">ğŸ‘¤</div>
            <div class="activity-details">
              <p class="activity-title">New patient registered</p>
              <p class="activity-time">1 day ago</p>
            </div>
          </div>
        </div>
      </div>

    </div>

  </section>

</main>

<!-- ================= EDIT PROFILE MODAL ================= -->
<div id="editProfileModal" class="modal" style="display:none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Edit Profile</h2>
      <button class="close-btn" onclick="closeEditProfile()">Ã—</button>
    </div>

    <form onsubmit="saveProfile(event)">
      <div class="form-group">
        <label>Name</label>
        <input id="docName" required />
      </div>

      <div class="form-group">
        <label>Specialization</label>
        <input id="docSpecialization" required />
      </div>

      <div class="form-group">
        <label>Hospital</label>
        <input id="docHospital" />
      </div>

      <div class="form-group">
        <label>Experience (years)</label>
        <input id="docExperience" type="number" />
      </div>

      <div class="form-group">
        <label>Contact Number</label>
        <input id="docContact" type="tel" placeholder="+91 XXXXX XXXXX" />
      </div>

      <div class="form-group">
        <label>Email</label>
        <input id="docEmail" type="email" />
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn-dark">Save Changes</button>
        <button type="button" class="btn-light" onclick="closeEditProfile()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- ================= PRESCRIPTION MODAL ================= -->
<div id="prescriptionModal" class="modal" style="display:none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Prescription</h2>
      <button class="close-btn" onclick="closePrescription()">Ã—</button>
    </div>

    <form onsubmit="submitPrescription(event)">
      <div class="form-group">
        <label>Patient Name</label>
        <input id="patientName" readonly />
      </div>

      <div class="form-group">
        <label>Diagnosis</label>
        <input id="diag" required placeholder="Enter diagnosis" />
      </div>

      <div class="form-group">
        <label>Medicines</label>
        <textarea id="meds" required rows="4" placeholder="Enter medicines with dosage and frequency"></textarea>
      </div>

      <div class="form-group">
        <label>Advice</label>
        <textarea id="advice" rows="3" placeholder="Additional advice for the patient"></textarea>
      </div>

      <div class="form-group">
        <label>Follow-up Date</label>
        <input id="followupDate" type="date" />
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn-dark">Save Prescription</button>
        <button type="button" class="btn-light" onclick="closePrescription()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- ================= SCRIPT ================= -->
<script src="js/keyExchange.js"></script>
<script src="js/doctor-dashboard.js"></script>

</body>
</html>